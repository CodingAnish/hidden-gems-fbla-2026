{% extends "base.html" %}
{% block title %}Verify Email{% endblock %}
{% block content %}

<div style="display: flex; align-items: center; justify-content: center; min-height: 70vh; padding: 2rem;">
  <div style="background: var(--color-surface); border-radius: var(--radius-xl); padding: 3rem; box-shadow: var(--shadow-xl); max-width: 500px; width: 100%;">
    <div style="text-align: center; margin-bottom: 2.5rem;">
      <div style="font-size: 4rem; margin-bottom: 1rem;"></div>
      <h1 style="font-size: 2.25rem; font-weight: 700; margin: 0 0 0.75rem 0; color: var(--color-text);">Verify Your Email</h1>
      <p style="font-size: 1.05rem; color: var(--color-text-muted); margin: 0; line-height: 1.6;">
        We've sent a 6-digit verification code to<br>
        <strong style="color: var(--color-primary);">{{ email }}</strong>
      </p>
    </div>

    <form method="post" action="{{ url_for('verify') }}" style="display: flex; flex-direction: column; gap: 1.5rem;">
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        <label for="code" style="font-weight: 600; font-size: 0.95rem; color: var(--color-text);">Verification Code</label>
        <input 
          type="text" 
          id="code" 
          name="code" 
          required 
          placeholder="Enter 6-digit code" 
          maxlength="6"
          pattern="[0-9]{6}"
          autocomplete="off"
          style="padding: 1rem; border: 2px solid var(--color-border); border-radius: var(--radius-md); font-size: 1.5rem; text-align: center; letter-spacing: 0.5rem; font-weight: 700; transition: all var(--transition-base); font-family: 'Courier New', monospace;" 
          onfocus="this.style.borderColor='var(--color-primary)'; this.style.boxShadow='0 0 0 3px rgba(6, 182, 212, 0.1)';" 
          onblur="this.style.borderColor='var(--color-border)'; this.style.boxShadow='none';"
          oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6)">
        <small style="color: var(--color-text-muted); font-size: 0.9rem; margin-top: 0.25rem;">Enter the 6-digit code from your email</small>
      </div>

      <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem; font-size: 1.05rem; font-weight: 600; margin-top: 0.5rem;">
        Verify Email
      </button>
    </form>

    <div style="display: flex; align-items: center; margin: 2rem 0; gap: 1rem;">
      <div style="flex: 1; height: 1px; background: var(--color-border);"></div>
      <span style="font-size: 0.95rem; color: var(--color-text-muted);">Didn't receive it?</span>
      <div style="flex: 1; height: 1px; background: var(--color-border);"></div>
    </div>

    <form method="post" action="{{ url_for('resend_verification') }}" style="text-align: center;">
      <button type="submit" class="btn btn-ghost" style="width: 100%; padding: 0.9rem; font-size: 1rem;">
        ðŸ“¨ Resend Verification Code
      </button>
    </form>

    <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 4px solid var(--color-primary); padding: 1rem; border-radius: var(--radius-md); margin-top: 2rem;">
      <p style="margin: 0; font-size: 0.9rem; color: var(--color-text); line-height: 1.6;">
        <strong> Tip:</strong> Check your spam folder if you don't see the email. Make sure to whitelist <strong>Hidden Gems</strong> so our emails reach your inbox.
      </p>
    </div>

    <p style="text-align: center; font-size: 0.9rem; margin: 2rem 0 0; color: var(--color-text-muted);">
      Wrong email? 
      <a href="{{ url_for('register') }}" style="color: var(--color-text); text-decoration: none; font-weight: 600; transition: color var(--transition-base);" onmouseover="this.style.color='#555';" onmouseout="this.style.color='var(--color-text)';">Register again</a>
    </p>
  </div>
</div>

<script>
  // Auto-submit when 6 digits are entered
  document.getElementById('code').addEventListener('input', function(e) {
    if (e.target.value.length === 6) {
      // Optional: Auto-submit after a brief delay
      setTimeout(() => {
        if (e.target.value.length === 6) {
          e.target.form.submit();
        }
      }, 300);
    }
  });
  
  // Auto-focus the code input
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('code').focus();
  });
</script>

{% endblock %}
